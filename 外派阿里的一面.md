**第一家**



你是如何学习新技术的？

**不闻不若闻之，闻之不若见之，见之不若知之，知之不若行之，学至于行而止矣，行之，明也**

**说下你们项目的流程**

老套路，我就说了下最近的项目

**redis如何实现高可用的**

哨兵模式和复制

**那你讲一下哨兵模式吧**

当我们的主机master宕机之后，我们的slave会等待我们的master上线，再次期间不会进行任何操作，这个时候我们可以手动的进行主机切换，将我们其中的一台从机slaver装换成我们的主机master，当原来的master恢复重新上线的时候，会自动沦为从机slave，可是我们无法知道redis什么时候宕机，所以我们需要他们自动的监控和进行主从切换，而哨兵提供了这些功能，监控，通知和自动的故障转移，最常见的哨兵模型就是一主二从三哨兵

**使用是三个哨兵会不会浪费？**

不会，在哨兵模式下，我们需要奇数个哨兵，因为当主机宕机之后哨兵会去判断master是否宕机，在哨兵集群下进行投票，当投票数超过设定的值的时候会进行从机slave选举成为master，所以我们最少需要三台哨兵去监控我们的主机

**说一下redis的持久化**

主要有两种，rdb和aof

rdb是redis默认的持久化方式，在指定的时间间隔内将内存中的数据集快照（Snapshot）写入磁盘的二进制文件，所产生的也就是dump.rdb文件，它恢复时是将快照文件直接读到内存里。

aof是以日志的形式来记录每个写操作，将Redis执行过的所有写指令记录下来(读操作不记录)，只许追加文件但不可以改写文件，redis启动之初会读取该文件重新构建数据，

**知道如何实现分布式锁吗**

我知道的有两种方式，一个是redis，另一个是zk，我对redis比较了解，我就说一下redis如何实现分布式锁吧

单机模式下可以使用setnx 去设置锁，设置成功，返回 1 ;设置失败，返回 0 。 (挖坑，让他有下面的提问)

在集群模式下使用redlock去实现分布式锁（这个我没回答上来，后面会进行学习）

**使用setnx会不会出现什么问题**

不设置过期时间，宕机后会变成死锁，为了保证操作的原子性，我们可以使用SET key  value NX PX 30000命令，在java是这样实现的

```java
 //jedis为例找到如下参数的 nxxx 改成nx，expx改成px 
 set(final String key, final String value, 
     final String nxxx, final String expx,final int time) 
```

**那删除key的时候怎么办**

删除的时候可以使用lua脚本语言保证删除过程的原子性，在删除的时候要先判断value值是否一样

**那你写过lua表达式吗？**

害，这个还真没写过，后面继续学习

**讲一下缓存雪崩和击穿**

雪崩：当热点数据同一时间大范围失效，导致所有的访问都直接落到了啧啧啧·

击穿：

**那你有什么办法解决缓存雪崩吗**

**还有其他方法吗？**

**穿透击穿呢？**

**如何解决呢？**

**那你说一下redis为什么执行单线程的还怎么快**

**redis 的String的容量是多大**

**讲一下jvm**

**jvm为什么采用分带收集**

**类加载机制**

**双亲委派是什么？**

**关于eureka你们用来做什么了**

**说一下你boot都用过什么注解吧**

**你知道bean都是怎么注入的吗？**

**说一下@autowired和@Resource的区别**

**讲讲aop吧**



**第二家**

**也是问了我的项目。然后根据我项目使用到的技术点开始询问**

**先是说流程，然后问我有关aop方面的**

**aop他是如何实现的**

**那你说一下动态代理是如何实现的**

**反射他都有哪些方法属性，他可以用来干什么？**

**创建线程的几种方式**

**这几种方式的区别是什么**

**如何停止一个线程**

**线程池用过吗，说一下都有哪些线程池，和几个重要的属性**

**你们项目中用到过多线程吗？**

**你们为什么使用多线程，解决了什么问题？**

**spring的bean是单例的吗**

**创建单例有几种方式**

**单例如何成为一个安全的？**

**项目遇到了那些问题**

**那你说一下websocket吧**

**说一下tcp**

**他的三次握手你了解吗？ 我握手两次 四次行不行？**



**第三家**

**spring底层用了那些设计模式**

**bio和nio的区别**

**websocket的核心**

**websocket连接突然断了怎么办**

**nio的多路复用**

**你了解那些集合**

**hashmap的底层讲一下**

**什么时候链表转化成红黑树**

**二叉树和红黑树的区别**

**红黑树什么时候发生自旋**

**发生oom你们是如何解决的**

**java自带的jvm分析器是什么？**





